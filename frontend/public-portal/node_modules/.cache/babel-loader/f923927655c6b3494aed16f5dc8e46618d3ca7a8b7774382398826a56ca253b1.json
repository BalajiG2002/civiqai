{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\NISHANTH MEGAN\\\\civiqai\\\\frontend\\\\public-portal\\\\src\\\\components\\\\MapPanel.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef } from 'react';\nimport { Loader } from '@googlemaps/js-api-loader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MAPS_KEY = process.env.REACT_APP_MAPS_KEY;\nconst PIN_COLORS = {\n  open: '#dc2626',\n  in_progress: '#d97706',\n  resolved: '#16a34a'\n};\nexport default function MapPanel({\n  complaints,\n  onPinClick\n}) {\n  _s();\n  const mapRef = useRef(null);\n  const gMapRef = useRef(null);\n  const markers = useRef({});\n  useEffect(() => {\n    const loader = new Loader({\n      apiKey: MAPS_KEY,\n      version: 'weekly'\n    });\n    loader.load().then(() => {\n      gMapRef.current = new window.google.maps.Map(mapRef.current, {\n        center: {\n          lat: 13.0827,\n          lng: 80.2707\n        },\n        zoom: 12,\n        styles: [{\n          featureType: 'poi',\n          stylers: [{\n            visibility: 'off'\n          }]\n        }]\n      });\n    });\n  }, []);\n\n  // Sync markers with complaints\n  useEffect(() => {\n    if (!gMapRef.current) return;\n    complaints.forEach(c => {\n      if (!c.lat || !c.lng) return;\n      if (markers.current[c.id]) {\n        // Update existing marker color\n        markers.current[c.id].setIcon(buildIcon(c.status));\n      } else {\n        // Create new marker\n        const marker = new window.google.maps.Marker({\n          position: {\n            lat: c.lat,\n            lng: c.lng\n          },\n          map: gMapRef.current,\n          icon: buildIcon(c.status),\n          title: c.id\n        });\n        const info = new window.google.maps.InfoWindow({\n          content: buildInfoContent(c)\n        });\n        marker.addListener('click', () => {\n          info.open(gMapRef.current, marker);\n          onPinClick === null || onPinClick === void 0 ? void 0 : onPinClick(c);\n        });\n        markers.current[c.id] = marker;\n      }\n    });\n  }, [complaints, onPinClick]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapRef,\n    className: \"w-full h-full rounded-xl overflow-hidden\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n_s(MapPanel, \"kx+Cs9PxYpdTvGO6l40vI3BXgvc=\");\n_c = MapPanel;\nfunction buildIcon(status) {\n  return {\n    path: window.google.maps.SymbolPath.CIRCLE,\n    fillColor: PIN_COLORS[status] || PIN_COLORS.open,\n    fillOpacity: 0.9,\n    strokeWeight: 2,\n    strokeColor: '#ffffff',\n    scale: 10\n  };\n}\nfunction buildInfoContent(c) {\n  var _c$issue_type, _c$status;\n  return `\n    <div style=\"font-family:sans-serif;padding:8px;max-width:200px\">\n      <b>${(_c$issue_type = c.issue_type) === null || _c$issue_type === void 0 ? void 0 : _c$issue_type.replace(/_/g, ' ')}</b><br/>\n      <small>${c.location}</small><br/>\n      <span style=\"color:${PIN_COLORS[c.status]};font-weight:bold\">\n        ${(_c$status = c.status) === null || _c$status === void 0 ? void 0 : _c$status.toUpperCase()}\n      </span>\n      ${c.priority ? `· <b>${c.priority}</b>` : ''}\n    </div>\n  `;\n}\nvar _c;\n$RefreshReg$(_c, \"MapPanel\");","map":{"version":3,"names":["useEffect","useRef","Loader","jsxDEV","_jsxDEV","MAPS_KEY","process","env","REACT_APP_MAPS_KEY","PIN_COLORS","open","in_progress","resolved","MapPanel","complaints","onPinClick","_s","mapRef","gMapRef","markers","loader","apiKey","version","load","then","current","window","google","maps","Map","center","lat","lng","zoom","styles","featureType","stylers","visibility","forEach","c","id","setIcon","buildIcon","status","marker","Marker","position","map","icon","title","info","InfoWindow","content","buildInfoContent","addListener","ref","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","path","SymbolPath","CIRCLE","fillColor","fillOpacity","strokeWeight","strokeColor","scale","_c$issue_type","_c$status","issue_type","replace","location","toUpperCase","priority","$RefreshReg$"],"sources":["C:/Users/NISHANTH MEGAN/civiqai/frontend/public-portal/src/components/MapPanel.jsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\r\nimport { Loader } from '@googlemaps/js-api-loader';\r\n\r\nconst MAPS_KEY = process.env.REACT_APP_MAPS_KEY;\r\n\r\nconst PIN_COLORS = {\r\n  open:        '#dc2626',\r\n  in_progress: '#d97706',\r\n  resolved:    '#16a34a'\r\n};\r\n\r\nexport default function MapPanel({ complaints, onPinClick }) {\r\n  const mapRef  = useRef(null);\r\n  const gMapRef = useRef(null);\r\n  const markers = useRef({});\r\n\r\n  useEffect(() => {\r\n    const loader = new Loader({\r\n      apiKey: MAPS_KEY,\r\n      version: 'weekly'\r\n    });\r\n\r\n    loader.load().then(() => {\r\n      gMapRef.current = new window.google.maps.Map(mapRef.current, {\r\n        center: { lat: 13.0827, lng: 80.2707 },\r\n        zoom: 12,\r\n        styles: [\r\n          { featureType: 'poi', stylers: [{ visibility: 'off' }] }\r\n        ]\r\n      });\r\n    });\r\n  }, []);\r\n\r\n  // Sync markers with complaints\r\n  useEffect(() => {\r\n    if (!gMapRef.current) return;\r\n\r\n    complaints.forEach(c => {\r\n      if (!c.lat || !c.lng) return;\r\n\r\n      if (markers.current[c.id]) {\r\n        // Update existing marker color\r\n        markers.current[c.id].setIcon(buildIcon(c.status));\r\n      } else {\r\n        // Create new marker\r\n        const marker = new window.google.maps.Marker({\r\n          position: { lat: c.lat, lng: c.lng },\r\n          map: gMapRef.current,\r\n          icon: buildIcon(c.status),\r\n          title: c.id\r\n        });\r\n\r\n        const info = new window.google.maps.InfoWindow({\r\n          content: buildInfoContent(c)\r\n        });\r\n\r\n        marker.addListener('click', () => {\r\n          info.open(gMapRef.current, marker);\r\n          onPinClick?.(c);\r\n        });\r\n\r\n        markers.current[c.id] = marker;\r\n      }\r\n    });\r\n  }, [complaints, onPinClick]);\r\n\r\n  return (\r\n    <div ref={mapRef}\r\n         className=\"w-full h-full rounded-xl overflow-hidden\" />\r\n  );\r\n}\r\n\r\nfunction buildIcon(status) {\r\n  return {\r\n    path: window.google.maps.SymbolPath.CIRCLE,\r\n    fillColor: PIN_COLORS[status] || PIN_COLORS.open,\r\n    fillOpacity: 0.9,\r\n    strokeWeight: 2,\r\n    strokeColor: '#ffffff',\r\n    scale: 10\r\n  };\r\n}\r\n\r\nfunction buildInfoContent(c) {\r\n  return `\r\n    <div style=\"font-family:sans-serif;padding:8px;max-width:200px\">\r\n      <b>${c.issue_type?.replace(/_/g,' ')}</b><br/>\r\n      <small>${c.location}</small><br/>\r\n      <span style=\"color:${PIN_COLORS[c.status]};font-weight:bold\">\r\n        ${c.status?.toUpperCase()}\r\n      </span>\r\n      ${c.priority ? `· <b>${c.priority}</b>` : ''}\r\n    </div>\r\n  `;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}