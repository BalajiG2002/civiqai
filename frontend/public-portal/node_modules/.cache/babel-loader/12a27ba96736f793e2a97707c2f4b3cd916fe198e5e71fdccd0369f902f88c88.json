{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nconst BASE = process.env.REACT_APP_API_URL || 'http://localhost:8080';\nexport function useComplaints() {\n  _s();\n  const [complaints, setComplaints] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState({\n    status: '',\n    issue_type: ''\n  });\n  const fetch = useCallback(async () => {\n    setLoading(true);\n    try {\n      const params = {};\n      if (filter.status) params.status = filter.status;\n      if (filter.issue_type) params.issue_type = filter.issue_type;\n      const {\n        data\n      } = await axios.get(`${BASE}/complaints`, {\n        params\n      });\n      setComplaints(data);\n    } catch (e) {\n      console.error(e);\n    } finally {\n      setLoading(false);\n    }\n  }, [filter]);\n  useEffect(() => {\n    fetch();\n  }, [fetch]);\n\n  // Add new complaint from SSE without refetch\n  const addComplaint = useCallback(c => {\n    setComplaints(prev => [c, ...prev]);\n  }, []);\n  const updateComplaint = useCallback((id, patch) => {\n    setComplaints(prev => prev.map(c => c.id === id ? {\n      ...c,\n      ...patch\n    } : c));\n  }, []);\n  return {\n    complaints,\n    loading,\n    filter,\n    setFilter,\n    addComplaint,\n    updateComplaint\n  };\n}\n_s(useComplaints, \"XUXihICDmVOspvH3TZH4CjGYprE=\");","map":{"version":3,"names":["useState","useEffect","useCallback","axios","BASE","process","env","REACT_APP_API_URL","useComplaints","_s","complaints","setComplaints","loading","setLoading","filter","setFilter","status","issue_type","fetch","params","data","get","e","console","error","addComplaint","c","prev","updateComplaint","id","patch","map"],"sources":["C:/Users/NISHANTH MEGAN/civiqai/frontend/public-portal/src/hooks/useComplaints.js"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst BASE = process.env.REACT_APP_API_URL || 'http://localhost:8080';\r\n\r\nexport function useComplaints() {\r\n  const [complaints, setComplaints] = useState([]);\r\n  const [loading,    setLoading]    = useState(true);\r\n  const [filter,     setFilter]     = useState({\r\n    status: '', issue_type: ''\r\n  });\r\n\r\n  const fetch = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const params = {};\r\n      if (filter.status)     params.status     = filter.status;\r\n      if (filter.issue_type) params.issue_type = filter.issue_type;\r\n      const { data } = await axios.get(`${BASE}/complaints`, { params });\r\n      setComplaints(data);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [filter]);\r\n\r\n  useEffect(() => { fetch(); }, [fetch]);\r\n\r\n  // Add new complaint from SSE without refetch\r\n  const addComplaint = useCallback((c) => {\r\n    setComplaints(prev => [c, ...prev]);\r\n  }, []);\r\n\r\n  const updateComplaint = useCallback((id, patch) => {\r\n    setComplaints(prev =>\r\n      prev.map(c => c.id === id ? { ...c, ...patch } : c)\r\n    );\r\n  }, []);\r\n\r\n  return { complaints, loading, filter,\r\n           setFilter, addComplaint, updateComplaint };\r\n}\r\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AACxD,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;AAErE,OAAO,SAASC,aAAaA,CAAA,EAAG;EAAAC,EAAA;EAC9B,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACY,OAAO,EAAKC,UAAU,CAAC,GAAMb,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAM,CAACc,MAAM,EAAMC,SAAS,CAAC,GAAOf,QAAQ,CAAC;IAC3CgB,MAAM,EAAE,EAAE;IAAEC,UAAU,EAAE;EAC1B,CAAC,CAAC;EAEF,MAAMC,KAAK,GAAGhB,WAAW,CAAC,YAAY;IACpCW,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,MAAMM,MAAM,GAAG,CAAC,CAAC;MACjB,IAAIL,MAAM,CAACE,MAAM,EAAMG,MAAM,CAACH,MAAM,GAAOF,MAAM,CAACE,MAAM;MACxD,IAAIF,MAAM,CAACG,UAAU,EAAEE,MAAM,CAACF,UAAU,GAAGH,MAAM,CAACG,UAAU;MAC5D,MAAM;QAAEG;MAAK,CAAC,GAAG,MAAMjB,KAAK,CAACkB,GAAG,CAAC,GAAGjB,IAAI,aAAa,EAAE;QAAEe;MAAO,CAAC,CAAC;MAClER,aAAa,CAACS,IAAI,CAAC;IACrB,CAAC,CAAC,OAAOE,CAAC,EAAE;MACVC,OAAO,CAACC,KAAK,CAACF,CAAC,CAAC;IAClB,CAAC,SAAS;MACRT,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC,EAAE,CAACC,MAAM,CAAC,CAAC;EAEZb,SAAS,CAAC,MAAM;IAAEiB,KAAK,CAAC,CAAC;EAAE,CAAC,EAAE,CAACA,KAAK,CAAC,CAAC;;EAEtC;EACA,MAAMO,YAAY,GAAGvB,WAAW,CAAEwB,CAAC,IAAK;IACtCf,aAAa,CAACgB,IAAI,IAAI,CAACD,CAAC,EAAE,GAAGC,IAAI,CAAC,CAAC;EACrC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,eAAe,GAAG1B,WAAW,CAAC,CAAC2B,EAAE,EAAEC,KAAK,KAAK;IACjDnB,aAAa,CAACgB,IAAI,IAChBA,IAAI,CAACI,GAAG,CAACL,CAAC,IAAIA,CAAC,CAACG,EAAE,KAAKA,EAAE,GAAG;MAAE,GAAGH,CAAC;MAAE,GAAGI;IAAM,CAAC,GAAGJ,CAAC,CACpD,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IAAEhB,UAAU;IAAEE,OAAO;IAAEE,MAAM;IAC3BC,SAAS;IAAEU,YAAY;IAAEG;EAAgB,CAAC;AACrD;AAACnB,EAAA,CArCeD,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}