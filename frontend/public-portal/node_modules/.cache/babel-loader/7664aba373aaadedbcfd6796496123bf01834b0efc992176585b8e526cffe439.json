{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\NISHANTH MEGAN\\\\civiqai\\\\frontend\\\\public-portal\\\\src\\\\pages\\\\ReportPage.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport ThinkingSteps from '../components/ThinkingSteps';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BASE = process.env.REACT_APP_API_URL || 'http://localhost:8080';\n\n// Simulates the agent pipeline steps in real time\nfunction buildSteps(phase, hasImage) {\n  const imageSteps = [{\n    id: 'analyze',\n    label: 'Analyzing image with Gemini Vision',\n    detail: 'Identifying issue type, severity and road condition'\n  }, {\n    id: 'locate',\n    label: 'Geocoding location',\n    detail: 'Converting address to coordinates via Maps API'\n  }, {\n    id: 'ward',\n    label: 'Finding municipal ward',\n    detail: 'Reverse geocoding to get ward and zone'\n  }, {\n    id: 'search',\n    label: 'Searching municipal directory',\n    detail: 'Looking up responsible officer in Redis'\n  }, {\n    id: 'cluster',\n    label: 'Checking nearby complaints',\n    detail: 'Scanning 500m radius for similar issues'\n  }, {\n    id: 'dispatch',\n    label: 'Sending work order email',\n    detail: 'Dispatching to municipal department'\n  }, {\n    id: 'publish',\n    label: 'Publishing to public feed',\n    detail: 'Posting complaint on the portal'\n  }];\n  const chatSteps = [{\n    id: 'processing',\n    label: 'Processing your query',\n    detail: 'Understanding your question'\n  }, {\n    id: 'search',\n    label: 'Searching complaint database',\n    detail: 'Looking up relevant data'\n  }, {\n    id: 'analyze',\n    label: 'Analyzing trends and patterns',\n    detail: 'Generating insights'\n  }, {\n    id: 'respond',\n    label: 'Preparing response',\n    detail: 'Formatting answer for you'\n  }];\n  const all = hasImage ? imageSteps : chatSteps;\n  return all.map((s, i) => ({\n    ...s,\n    active: i <= phase,\n    status: i < phase ? 'done' : i === phase ? 'running' : 'analyzing'\n  }));\n}\nconst SUGGESTIONS = ['üöß Report a pothole', 'üíß Water pipe leaking', 'üóëÔ∏è Garbage not collected', 'üí° Streetlight not working', 'üåä Waterlogging issue'];\nexport default function ReportPage() {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [image, setImage] = useState(null);\n  const [preview, setPreview] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [phase, setPhase] = useState(-1);\n  const [started, setStarted] = useState(false);\n  const [hasImage, setHasImage] = useState(false);\n  const [gpsCoords, setGpsCoords] = useState(null); // {lat, lng}\n  const [gpsLoading, setGpsLoading] = useState(false);\n  const bottomRef = useRef(null);\n  const fileRef = useRef(null);\n  const timerRef = useRef(null);\n  useEffect(() => {\n    var _bottomRef$current;\n    (_bottomRef$current = bottomRef.current) === null || _bottomRef$current === void 0 ? void 0 : _bottomRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages, phase]);\n\n  // Handle paste event to capture images from clipboard\n  useEffect(() => {\n    const handlePaste = e => {\n      var _e$clipboardData;\n      const items = (_e$clipboardData = e.clipboardData) === null || _e$clipboardData === void 0 ? void 0 : _e$clipboardData.items;\n      if (!items) return;\n      for (const item of items) {\n        if (item.type.startsWith('image/')) {\n          e.preventDefault();\n          const file = item.getAsFile();\n          if (file) {\n            setImage(file);\n            setPreview(URL.createObjectURL(file));\n          }\n          break;\n        }\n      }\n    };\n    document.addEventListener('paste', handlePaste);\n    return () => document.removeEventListener('paste', handlePaste);\n  }, []);\n\n  // Simulate step-by-step agent progress\n  const simulateSteps = useCallback((onDone, isImageSubmission) => {\n    let step = 0;\n    const maxSteps = isImageSubmission ? 7 : 4;\n    setPhase(0);\n    timerRef.current = setInterval(() => {\n      step++;\n      if (step >= maxSteps) {\n        clearInterval(timerRef.current);\n        setPhase(maxSteps + 1); // all done\n        onDone();\n      } else {\n        setPhase(step);\n      }\n    }, 1400);\n  }, []);\n\n  // ‚îÄ‚îÄ GPS: Get current location ‚îÄ‚îÄ\n  const handleGps = useCallback(() => {\n    if (!navigator.geolocation) {\n      alert('Geolocation is not supported by your browser');\n      return;\n    }\n    setGpsLoading(true);\n    navigator.geolocation.getCurrentPosition(async pos => {\n      const {\n        latitude,\n        longitude\n      } = pos.coords;\n      setGpsCoords({\n        lat: latitude,\n        lng: longitude\n      });\n      try {\n        const {\n          data\n        } = await axios.get(`${BASE}/reverse-geocode?lat=${latitude}&lng=${longitude}`);\n        const addr = data.formatted_address || data.area || `${latitude}, ${longitude}`;\n        setInput(prev => prev ? prev : addr);\n      } catch {\n        setInput(`${latitude.toFixed(6)}, ${longitude.toFixed(6)}`);\n      }\n      setGpsLoading(false);\n    }, err => {\n      console.error('GPS error', err);\n      alert('Could not get your location. Please allow location access.');\n      setGpsLoading(false);\n    }, {\n      enableHighAccuracy: true,\n      timeout: 10000\n    });\n  }, []);\n  const handleImage = e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    setImage(file);\n    setPreview(URL.createObjectURL(file));\n  };\n  const handleRemoveImage = () => {\n    setImage(null);\n    setPreview(null);\n    if (fileRef.current) fileRef.current.value = '';\n  };\n  const handleSubmit = async text => {\n    const msg = text || input.trim();\n    if (!msg && !image) return;\n    const isImageSubmission = !!image;\n    setHasImage(isImageSubmission);\n    setStarted(true);\n    setLoading(true);\n    setPhase(0);\n\n    // Add user message\n    setMessages(prev => [...prev, {\n      role: 'user',\n      text: msg,\n      image: preview\n    }]);\n    setInput('');\n    setPreview(null);\n\n    // Add thinking message\n    const thinkingId = Date.now();\n    setMessages(prev => [...prev, {\n      role: 'thinking',\n      id: thinkingId\n    }]);\n    try {\n      const apiPromise = image ? submitWithImage(msg) : submitChatOnly(msg);\n      simulateSteps(async () => {\n        try {\n          const result = await apiPromise;\n          setMessages(prev => prev.map(m => m.id === thinkingId ? {\n            role: 'assistant',\n            text: result\n          } : m));\n        } catch (err) {\n          var _err$response, _err$response$data, _err$response2, _err$response2$data;\n          const errorMessage = (err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.reply) || (err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || '‚ùå Something went wrong. Please try again.';\n          setMessages(prev => prev.map(m => m.id === thinkingId ? {\n            role: 'assistant',\n            text: errorMessage\n          } : m));\n        } finally {\n          setLoading(false);\n          setPhase(-1);\n          setImage(null);\n          setHasImage(false);\n        }\n      }, isImageSubmission);\n    } catch (err) {\n      setMessages(prev => prev.map(m => m.id === thinkingId ? {\n        role: 'assistant',\n        text: '‚ùå Something went wrong. Please try again.'\n      } : m));\n      setLoading(false);\n      setPhase(-1);\n      setImage(null);\n    }\n  };\n  const submitWithImage = async location => {\n    const fd = new FormData();\n    fd.append('image', image);\n    fd.append('location', location || 'Chennai');\n    if (gpsCoords) {\n      fd.append('lat', gpsCoords.lat);\n      fd.append('lng', gpsCoords.lng);\n    }\n    const {\n      data\n    } = await axios.post(`${BASE}/complaint`, fd, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    setGpsCoords(null); // reset after submission\n    return data.message || 'Complaint submitted successfully!';\n  };\n  const submitChatOnly = async msg => {\n    const {\n      data\n    } = await axios.post(`${BASE}/chat`, {\n      message: msg,\n      session_id: 'public_portal_chat'\n    });\n    return data.reply || data.message || 'Received your message.';\n  };\n\n  // Welcome screen\n  if (!started) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-2xl mx-auto px-4 py-16 flex flex-col\\r items-center text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-16 h-16 rounded-2xl bg-gradient-to-br\\r from-blue-600 to-purple-600 flex items-center\\r justify-center text-3xl mb-6 shadow-lg\",\n      children: \"\\uD83C\\uDFD9\\uFE0F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold text-white mb-2\",\n      children: \"Report a Civic Issue\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-zinc-400 mb-10 max-w-md\",\n      children: \"Take a photo or paste an image (Ctrl+V), share your location \\u2014 CiviqAI will analyze it and notify the right department automatically.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-xl\",\n      children: /*#__PURE__*/_jsxDEV(InputBar, {\n        input: input,\n        setInput: setInput,\n        image: image,\n        preview: preview,\n        fileRef: fileRef,\n        handleImage: handleImage,\n        handleRemoveImage: handleRemoveImage,\n        onSubmit: handleSubmit,\n        loading: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap gap-2 justify-center mt-6\",\n      children: SUGGESTIONS.map(s => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleSubmit(s),\n        className: \"px-4 py-2 bg-zinc-900 border border-white/10\\r rounded-full text-sm text-zinc-400\\r hover:border-white/30 hover:text-white\\r transition-all\",\n        children: s\n      }, s, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 251,\n    columnNumber: 5\n  }, this);\n\n  // Chat view\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-2xl mx-auto px-4 flex flex-col\\r h-[calc(100vh-65px)]\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-y-auto py-6 space-y-8\",\n      children: [messages.map((m, i) => {\n        var _m$text, _m$text2;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [m.role === 'user' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-6\",\n            children: [m.image && /*#__PURE__*/_jsxDEV(\"img\", {\n              src: m.image,\n              alt: \"uploaded\",\n              className: \"w-full max-h-56 object-cover\\r rounded-2xl mb-3 border border-white/10\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl font-bold text-white leading-tight\",\n              children: m.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 15\n          }, this), m.role === 'thinking' && phase >= 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-zinc-900 border border-white/10\\r rounded-2xl p-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-4 h-4 border-2 border-zinc-600\\r border-t-blue-400 rounded-full animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm font-medium text-zinc-400\",\n                children: hasImage ? 'CiviqAI is processing your complaint...' : 'CiviqAI is thinking...'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(ThinkingSteps, {\n              steps: buildSteps(phase, hasImage)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 15\n          }, this), m.role === 'assistant' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-6 h-6 rounded-full bg-gradient-to-br\\r from-blue-500 to-purple-600 flex items-center\\r justify-center text-xs\",\n                children: \"\\uD83E\\uDD16\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm font-semibold text-white\",\n                children: \"CiviqAI\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"prose prose-invert text-zinc-200\\r text-base leading-relaxed max-w-none\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: m.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 17\n            }, this), (_m$text = m.text) !== null && _m$text !== void 0 && _m$text.includes('submitted') || (_m$text2 = m.text) !== null && _m$text2 !== void 0 && _m$text2.includes('sent') ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-green-500/10 border border-green-500/20\\r rounded-xl p-4 flex items-start gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-2xl\",\n                children: \"\\u2705\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-green-400 font-semibold text-sm\",\n                  children: \"Complaint Submitted\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-green-300/70 text-xs mt-0.5\",\n                  children: \"Your complaint is now live on the feed and the department has been notified.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 362,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 19\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 15\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: bottomRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pb-4 pt-2 border-t border-white/10\",\n      children: /*#__PURE__*/_jsxDEV(InputBar, {\n        input: input,\n        setInput: setInput,\n        image: image,\n        preview: preview,\n        fileRef: fileRef,\n        handleImage: handleImage,\n        handleRemoveImage: handleRemoveImage,\n        onSubmit: handleSubmit,\n        loading: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 301,\n    columnNumber: 5\n  }, this);\n}\n\n// ‚îÄ‚îÄ Shared Input Bar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n_s(ReportPage, \"iW7lSzXvHnLUedXtauza+Aj3M1A=\");\n_c = ReportPage;\nfunction InputBar({\n  input,\n  setInput,\n  image,\n  preview,\n  fileRef,\n  handleImage,\n  handleRemoveImage,\n  onSubmit,\n  loading\n}) {\n  const handleKey = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      onSubmit(input);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-zinc-900 border border-white/10 rounded-2xl\\r overflow-hidden focus-within:border-white/30\\r transition-colors\",\n    children: [preview && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-4 pt-3\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative inline-block\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: preview,\n          alt: \"preview\",\n          className: \"h-20 w-32 object-cover rounded-xl\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleRemoveImage,\n          className: \"absolute -top-1 -right-1 w-5 h-5 bg-zinc-700\\r rounded-full flex items-center justify-center\\r text-xs hover:bg-red-600 transition-colors\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-end gap-2 px-4 py-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: input,\n        onChange: e => setInput(e.target.value),\n        onKeyDown: handleKey,\n        placeholder: preview ? \"Add location or description...\" : \"Describe the issue or paste an image (Ctrl+V)...\",\n        rows: 1,\n        className: \"flex-1 bg-transparent text-white text-sm\\r placeholder:text-zinc-600 resize-none focus:outline-none\\r max-h-32 overflow-y-auto\",\n        style: {\n          fieldSizing: 'content'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2 flex-shrink-0\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => fileRef.current.click(),\n          className: \"w-8 h-8 rounded-full flex items-center justify-center\\r text-zinc-500 hover:text-white hover:bg-white/10\\r transition-colors\",\n          title: \"Attach photo (or paste with Ctrl+V)\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-5 h-5\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 1.5,\n              d: \"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: fileRef,\n          type: \"file\",\n          accept: \"image/*\",\n          className: \"hidden\",\n          onChange: handleImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onSubmit(input),\n          disabled: loading || !input.trim() && !image,\n          className: \"w-8 h-8 rounded-full bg-white flex items-center\\r justify-center disabled:opacity-30 disabled:cursor-not-allowed\\r hover:bg-zinc-200 transition-colors\",\n          children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-4 h-4 border-2 border-zinc-400\\r border-t-zinc-800 rounded-full animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-4 h-4 text-black\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M5 12h14M12 5l7 7-7 7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 406,\n    columnNumber: 5\n  }, this);\n}\n_c2 = InputBar;\nvar _c, _c2;\n$RefreshReg$(_c, \"ReportPage\");\n$RefreshReg$(_c2, \"InputBar\");","map":{"version":3,"names":["useState","useRef","useEffect","useCallback","axios","ThinkingSteps","jsxDEV","_jsxDEV","BASE","process","env","REACT_APP_API_URL","buildSteps","phase","hasImage","imageSteps","id","label","detail","chatSteps","all","map","s","i","active","status","SUGGESTIONS","ReportPage","_s","messages","setMessages","input","setInput","image","setImage","preview","setPreview","loading","setLoading","setPhase","started","setStarted","setHasImage","gpsCoords","setGpsCoords","gpsLoading","setGpsLoading","bottomRef","fileRef","timerRef","_bottomRef$current","current","scrollIntoView","behavior","handlePaste","e","_e$clipboardData","items","clipboardData","item","type","startsWith","preventDefault","file","getAsFile","URL","createObjectURL","document","addEventListener","removeEventListener","simulateSteps","onDone","isImageSubmission","step","maxSteps","setInterval","clearInterval","handleGps","navigator","geolocation","alert","getCurrentPosition","pos","latitude","longitude","coords","lat","lng","data","get","addr","formatted_address","area","prev","toFixed","err","console","error","enableHighAccuracy","timeout","handleImage","target","files","handleRemoveImage","value","handleSubmit","text","msg","trim","role","thinkingId","Date","now","apiPromise","submitWithImage","submitChatOnly","result","m","_err$response","_err$response$data","_err$response2","_err$response2$data","errorMessage","response","reply","message","location","fd","FormData","append","post","headers","session_id","className","children","fileName","_jsxFileName","lineNumber","columnNumber","InputBar","onSubmit","onClick","_m$text","_m$text2","src","alt","steps","includes","ref","_c","handleKey","key","shiftKey","onChange","onKeyDown","placeholder","rows","style","fieldSizing","click","title","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","accept","disabled","_c2","$RefreshReg$"],"sources":["C:/Users/NISHANTH MEGAN/civiqai/frontend/public-portal/src/pages/ReportPage.jsx"],"sourcesContent":["import { useState, useRef, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport ThinkingSteps from '../components/ThinkingSteps';\r\n\r\nconst BASE = process.env.REACT_APP_API_URL || 'http://localhost:8080';\r\n\r\n// Simulates the agent pipeline steps in real time\r\nfunction buildSteps(phase, hasImage) {\r\n  const imageSteps = [\r\n    { id: 'analyze',  label: 'Analyzing image with Gemini Vision',\r\n      detail: 'Identifying issue type, severity and road condition' },\r\n    { id: 'locate',   label: 'Geocoding location',\r\n      detail: 'Converting address to coordinates via Maps API' },\r\n    { id: 'ward',     label: 'Finding municipal ward',\r\n      detail: 'Reverse geocoding to get ward and zone' },\r\n    { id: 'search',   label: 'Searching municipal directory',\r\n      detail: 'Looking up responsible officer in Redis' },\r\n    { id: 'cluster',  label: 'Checking nearby complaints',\r\n      detail: 'Scanning 500m radius for similar issues' },\r\n    { id: 'dispatch', label: 'Sending work order email',\r\n      detail: 'Dispatching to municipal department' },\r\n    { id: 'publish',  label: 'Publishing to public feed',\r\n      detail: 'Posting complaint on the portal' },\r\n  ];\r\n\r\n  const chatSteps = [\r\n    { id: 'processing', label: 'Processing your query',\r\n      detail: 'Understanding your question' },\r\n    { id: 'search',   label: 'Searching complaint database',\r\n      detail: 'Looking up relevant data' },\r\n    { id: 'analyze',  label: 'Analyzing trends and patterns',\r\n      detail: 'Generating insights' },\r\n    { id: 'respond',  label: 'Preparing response',\r\n      detail: 'Formatting answer for you' },\r\n  ];\r\n\r\n  const all = hasImage ? imageSteps : chatSteps;\r\n\r\n  return all.map((s, i) => ({\r\n    ...s,\r\n    active: i <= phase,\r\n    status: i < phase  ? 'done'\r\n          : i === phase ? 'running'\r\n          : 'analyzing'\r\n  }));\r\n}\r\n\r\nconst SUGGESTIONS = [\r\n  'üöß Report a pothole',\r\n  'üíß Water pipe leaking',\r\n  'üóëÔ∏è Garbage not collected',\r\n  'üí° Streetlight not working',\r\n  'üåä Waterlogging issue',\r\n];\r\n\r\nexport default function ReportPage() {\r\n  const [messages, setMessages] = useState([]);\r\n  const [input,    setInput]    = useState('');\r\n  const [image,    setImage]    = useState(null);\r\n  const [preview,  setPreview]  = useState(null);\r\n  const [loading,  setLoading]  = useState(false);\r\n  const [phase,    setPhase]    = useState(-1);\r\n  const [started,  setStarted]  = useState(false);\r\n  const [hasImage, setHasImage] = useState(false);\r\n  const [gpsCoords, setGpsCoords] = useState(null);   // {lat, lng}\r\n  const [gpsLoading, setGpsLoading] = useState(false);\r\n  const bottomRef  = useRef(null);\r\n  const fileRef    = useRef(null);\r\n  const timerRef   = useRef(null);\r\n\r\n  useEffect(() => {\r\n    bottomRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages, phase]);\r\n\r\n  // Handle paste event to capture images from clipboard\r\n  useEffect(() => {\r\n    const handlePaste = (e) => {\r\n      const items = e.clipboardData?.items;\r\n      if (!items) return;\r\n\r\n      for (const item of items) {\r\n        if (item.type.startsWith('image/')) {\r\n          e.preventDefault();\r\n          const file = item.getAsFile();\r\n          if (file) {\r\n            setImage(file);\r\n            setPreview(URL.createObjectURL(file));\r\n          }\r\n          break;\r\n        }\r\n      }\r\n    };\r\n\r\n    document.addEventListener('paste', handlePaste);\r\n    return () => document.removeEventListener('paste', handlePaste);\r\n  }, []);\r\n\r\n  // Simulate step-by-step agent progress\r\n  const simulateSteps = useCallback((onDone, isImageSubmission) => {\r\n    let step = 0;\r\n    const maxSteps = isImageSubmission ? 7 : 4;\r\n    setPhase(0);\r\n    timerRef.current = setInterval(() => {\r\n      step++;\r\n      if (step >= maxSteps) {\r\n        clearInterval(timerRef.current);\r\n        setPhase(maxSteps + 1); // all done\r\n        onDone();\r\n      } else {\r\n        setPhase(step);\r\n      }\r\n    }, 1400);\r\n  }, []);\r\n\r\n  // ‚îÄ‚îÄ GPS: Get current location ‚îÄ‚îÄ\r\n  const handleGps = useCallback(() => {\r\n    if (!navigator.geolocation) {\r\n      alert('Geolocation is not supported by your browser');\r\n      return;\r\n    }\r\n    setGpsLoading(true);\r\n    navigator.geolocation.getCurrentPosition(\r\n      async (pos) => {\r\n        const { latitude, longitude } = pos.coords;\r\n        setGpsCoords({ lat: latitude, lng: longitude });\r\n        try {\r\n          const { data } = await axios.get(\r\n            `${BASE}/reverse-geocode?lat=${latitude}&lng=${longitude}`\r\n          );\r\n          const addr = data.formatted_address || data.area || `${latitude}, ${longitude}`;\r\n          setInput(prev => prev ? prev : addr);\r\n        } catch {\r\n          setInput(`${latitude.toFixed(6)}, ${longitude.toFixed(6)}`);\r\n        }\r\n        setGpsLoading(false);\r\n      },\r\n      (err) => {\r\n        console.error('GPS error', err);\r\n        alert('Could not get your location. Please allow location access.');\r\n        setGpsLoading(false);\r\n      },\r\n      { enableHighAccuracy: true, timeout: 10000 }\r\n    );\r\n  }, []);\r\n\r\n  const handleImage = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    setImage(file);\r\n    setPreview(URL.createObjectURL(file));\r\n  };\r\n\r\n  const handleRemoveImage = () => {\r\n    setImage(null);\r\n    setPreview(null);\r\n    if (fileRef.current) fileRef.current.value = '';\r\n  };\r\n\r\n  const handleSubmit = async (text) => {\r\n    const msg = text || input.trim();\r\n    if (!msg && !image) return;\r\n\r\n    const isImageSubmission = !!image;\r\n    setHasImage(isImageSubmission);\r\n    setStarted(true);\r\n    setLoading(true);\r\n    setPhase(0);\r\n\r\n    // Add user message\r\n    setMessages(prev => [...prev, {\r\n      role:    'user',\r\n      text:    msg,\r\n      image:   preview\r\n    }]);\r\n    setInput('');\r\n    setPreview(null);\r\n\r\n    // Add thinking message\r\n    const thinkingId = Date.now();\r\n    setMessages(prev => [...prev, {\r\n      role: 'thinking',\r\n      id:   thinkingId\r\n    }]);\r\n\r\n    try {\r\n      const apiPromise = image\r\n        ? submitWithImage(msg)\r\n        : submitChatOnly(msg);\r\n\r\n      simulateSteps(async () => {\r\n        try {\r\n          const result = await apiPromise;\r\n          setMessages(prev => prev.map(m =>\r\n            m.id === thinkingId\r\n              ? { role: 'assistant', text: result }\r\n              : m\r\n          ));\r\n        } catch (err) {\r\n          const errorMessage = err?.response?.data?.reply\r\n            || err?.response?.data?.message\r\n            || '‚ùå Something went wrong. Please try again.';\r\n          setMessages(prev => prev.map(m =>\r\n            m.id === thinkingId\r\n              ? { role: 'assistant', text: errorMessage }\r\n              : m\r\n          ));\r\n        } finally {\r\n          setLoading(false);\r\n          setPhase(-1);\r\n          setImage(null);\r\n          setHasImage(false);\r\n        }\r\n      }, isImageSubmission);\r\n    } catch (err) {\r\n      setMessages(prev => prev.map(m =>\r\n        m.id === thinkingId\r\n          ? { role: 'assistant', text: '‚ùå Something went wrong. Please try again.' }\r\n          : m\r\n      ));\r\n      setLoading(false);\r\n      setPhase(-1);\r\n      setImage(null);\r\n    }\r\n  };\r\n\r\n  const submitWithImage = async (location) => {\r\n    const fd = new FormData();\r\n    fd.append('image',    image);\r\n    fd.append('location', location || 'Chennai');\r\n    if (gpsCoords) {\r\n      fd.append('lat', gpsCoords.lat);\r\n      fd.append('lng', gpsCoords.lng);\r\n    }\r\n    const { data } = await axios.post(`${BASE}/complaint`, fd, {\r\n      headers: { 'Content-Type': 'multipart/form-data' }\r\n    });\r\n    setGpsCoords(null);  // reset after submission\r\n    return data.message || 'Complaint submitted successfully!';\r\n  };\r\n\r\n  const submitChatOnly = async (msg) => {\r\n    const { data } = await axios.post(`${BASE}/chat`, {\r\n      message: msg,\r\n      session_id: 'public_portal_chat'\r\n    });\r\n    return data.reply || data.message || 'Received your message.';\r\n  };\r\n\r\n  // Welcome screen\r\n  if (!started) return (\r\n    <div className=\"max-w-2xl mx-auto px-4 py-16 flex flex-col\r\n                    items-center text-center\">\r\n      <div className=\"w-16 h-16 rounded-2xl bg-gradient-to-br\r\n                      from-blue-600 to-purple-600 flex items-center\r\n                      justify-center text-3xl mb-6 shadow-lg\">\r\n        üèôÔ∏è\r\n      </div>\r\n      <h1 className=\"text-3xl font-bold text-white mb-2\">\r\n        Report a Civic Issue\r\n      </h1>\r\n      <p className=\"text-zinc-400 mb-10 max-w-md\">\r\n        Take a photo or paste an image (Ctrl+V), share your location ‚Äî \r\n        CiviqAI will analyze it and notify the right department automatically.\r\n      </p>\r\n\r\n      {/* Main input */}\r\n      <div className=\"w-full max-w-xl\">\r\n        <InputBar\r\n          input={input}\r\n          setInput={setInput}\r\n          image={image}\r\n          preview={preview}\r\n          fileRef={fileRef}\r\n          handleImage={handleImage}\r\n          handleRemoveImage={handleRemoveImage}\r\n          onSubmit={handleSubmit}\r\n          loading={loading}\r\n        />\r\n      </div>\r\n\r\n      {/* Suggestions */}\r\n      <div className=\"flex flex-wrap gap-2 justify-center mt-6\">\r\n        {SUGGESTIONS.map(s => (\r\n          <button\r\n            key={s}\r\n            onClick={() => handleSubmit(s)}\r\n            className=\"px-4 py-2 bg-zinc-900 border border-white/10\r\n                       rounded-full text-sm text-zinc-400\r\n                       hover:border-white/30 hover:text-white\r\n                       transition-all\"\r\n          >\r\n            {s}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // Chat view\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto px-4 flex flex-col\r\n                    h-[calc(100vh-65px)]\">\r\n\r\n      {/* Messages */}\r\n      <div className=\"flex-1 overflow-y-auto py-6 space-y-8\">\r\n        {messages.map((m, i) => (\r\n          <div key={i}>\r\n\r\n            {/* User message */}\r\n            {m.role === 'user' && (\r\n              <div className=\"mb-6\">\r\n                {m.image && (\r\n                  <img src={m.image} alt=\"uploaded\"\r\n                       className=\"w-full max-h-56 object-cover\r\n                                  rounded-2xl mb-3 border border-white/10\"/>\r\n                )}\r\n                <h2 className=\"text-2xl font-bold text-white leading-tight\">\r\n                  {m.text}\r\n                </h2>\r\n              </div>\r\n            )}\r\n\r\n            {/* Thinking / Processing */}\r\n            {m.role === 'thinking' && phase >= 0 && (\r\n              <div className=\"bg-zinc-900 border border-white/10\r\n                              rounded-2xl p-5\">\r\n                <div className=\"flex items-center gap-2 mb-4\">\r\n                  <div className=\"w-4 h-4 border-2 border-zinc-600\r\n                                  border-t-blue-400 rounded-full animate-spin\"/>\r\n                  <span className=\"text-sm font-medium text-zinc-400\">\r\n                    {hasImage ? 'CiviqAI is processing your complaint...' : 'CiviqAI is thinking...'}\r\n                  </span>\r\n                </div>\r\n                <ThinkingSteps steps={buildSteps(phase, hasImage)} />\r\n              </div>\r\n            )}\r\n\r\n            {/* Assistant response */}\r\n            {m.role === 'assistant' && (\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <div className=\"w-6 h-6 rounded-full bg-gradient-to-br\r\n                                  from-blue-500 to-purple-600 flex items-center\r\n                                  justify-center text-xs\">ü§ñ</div>\r\n                  <span className=\"text-sm font-semibold text-white\">CiviqAI</span>\r\n                </div>\r\n                <div className=\"prose prose-invert text-zinc-200\r\n                                text-base leading-relaxed max-w-none\">\r\n                  <p>{m.text}</p>\r\n                </div>\r\n\r\n                {/* Success card */}\r\n                {m.text?.includes('submitted') ||\r\n                 m.text?.includes('sent') ? (\r\n                  <div className=\"bg-green-500/10 border border-green-500/20\r\n                                  rounded-xl p-4 flex items-start gap-3\">\r\n                    <span className=\"text-2xl\">‚úÖ</span>\r\n                    <div>\r\n                      <p className=\"text-green-400 font-semibold text-sm\">\r\n                        Complaint Submitted\r\n                      </p>\r\n                      <p className=\"text-green-300/70 text-xs mt-0.5\">\r\n                        Your complaint is now live on the feed and the\r\n                        department has been notified.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n        <div ref={bottomRef} />\r\n      </div>\r\n\r\n      {/* Sticky input */}\r\n      <div className=\"pb-4 pt-2 border-t border-white/10\">\r\n        <InputBar\r\n          input={input}\r\n          setInput={setInput}\r\n          image={image}\r\n          preview={preview}\r\n          fileRef={fileRef}\r\n          handleImage={handleImage}\r\n          handleRemoveImage={handleRemoveImage}\r\n          onSubmit={handleSubmit}\r\n          loading={loading}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// ‚îÄ‚îÄ Shared Input Bar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\r\nfunction InputBar({ input, setInput, image, preview, fileRef,\r\n                    handleImage, handleRemoveImage, onSubmit, loading }) {\r\n\r\n  const handleKey = (e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      onSubmit(input);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-zinc-900 border border-white/10 rounded-2xl\r\n                    overflow-hidden focus-within:border-white/30\r\n                    transition-colors\">\r\n\r\n      {/* Image preview strip */}\r\n      {preview && (\r\n        <div className=\"px-4 pt-3\">\r\n          <div className=\"relative inline-block\">\r\n            <img src={preview} alt=\"preview\"\r\n                 className=\"h-20 w-32 object-cover rounded-xl\"/>\r\n            <button\r\n              onClick={handleRemoveImage}\r\n              className=\"absolute -top-1 -right-1 w-5 h-5 bg-zinc-700\r\n                         rounded-full flex items-center justify-center\r\n                         text-xs hover:bg-red-600 transition-colors\">\r\n              ‚úï\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Text input */}\r\n      <div className=\"flex items-end gap-2 px-4 py-3\">\r\n        <textarea\r\n          value={input}\r\n          onChange={e => setInput(e.target.value)}\r\n          onKeyDown={handleKey}\r\n          placeholder={preview ? \"Add location or description...\" : \"Describe the issue or paste an image (Ctrl+V)...\"}\r\n          rows={1}\r\n          className=\"flex-1 bg-transparent text-white text-sm\r\n                     placeholder:text-zinc-600 resize-none focus:outline-none\r\n                     max-h-32 overflow-y-auto\"\r\n          style={{ fieldSizing: 'content' }}\r\n        />\r\n\r\n        {/* Action buttons */}\r\n        <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n\r\n          {/* Attach photo */}\r\n          <button\r\n            onClick={() => fileRef.current.click()}\r\n            className=\"w-8 h-8 rounded-full flex items-center justify-center\r\n                       text-zinc-500 hover:text-white hover:bg-white/10\r\n                       transition-colors\"\r\n            title=\"Attach photo (or paste with Ctrl+V)\"\r\n          >\r\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\"\r\n                 viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\"\r\n                    strokeWidth={1.5}\r\n                    d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\"/>\r\n            </svg>\r\n          </button>\r\n          <input ref={fileRef} type=\"file\" accept=\"image/*\"\r\n                 className=\"hidden\" onChange={handleImage} />\r\n\r\n          {/* Submit */}\r\n          <button\r\n            onClick={() => onSubmit(input)}\r\n            disabled={loading || (!input.trim() && !image)}\r\n            className=\"w-8 h-8 rounded-full bg-white flex items-center\r\n                       justify-center disabled:opacity-30 disabled:cursor-not-allowed\r\n                       hover:bg-zinc-200 transition-colors\"\r\n          >\r\n            {loading\r\n              ? <div className=\"w-4 h-4 border-2 border-zinc-400\r\n                                border-t-zinc-800 rounded-full animate-spin\"/>\r\n              : <svg className=\"w-4 h-4 text-black\" fill=\"none\"\r\n                     stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\"\r\n                        strokeWidth={2} d=\"M5 12h14M12 5l7 7-7 7\"/>\r\n                </svg>\r\n            }\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}