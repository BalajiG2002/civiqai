{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\NISHANTH MEGAN\\\\civiqai\\\\frontend\\\\public-portal\\\\src\\\\pages\\\\ReportPage.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport ThinkingSteps from '../components/ThinkingSteps';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BASE = process.env.REACT_APP_API_URL || 'http://localhost:8080';\n\n// Simulates the agent pipeline steps in real time\nfunction buildSteps(phase, hasImage) {\n  const imageSteps = [{\n    id: 'analyze',\n    label: 'Analyzing image with Gemini Vision',\n    detail: 'Identifying issue type, severity and road condition'\n  }, {\n    id: 'locate',\n    label: 'Geocoding location',\n    detail: 'Converting address to coordinates via Maps API'\n  }, {\n    id: 'ward',\n    label: 'Finding municipal ward',\n    detail: 'Reverse geocoding to get ward and zone'\n  }, {\n    id: 'search',\n    label: 'Searching municipal directory',\n    detail: 'Looking up responsible officer in Redis'\n  }, {\n    id: 'cluster',\n    label: 'Checking nearby complaints',\n    detail: 'Scanning 500m radius for similar issues'\n  }, {\n    id: 'dispatch',\n    label: 'Sending work order email',\n    detail: 'Dispatching to municipal department'\n  }, {\n    id: 'publish',\n    label: 'Publishing to public feed',\n    detail: 'Posting complaint on the portal'\n  }];\n  const chatSteps = [{\n    id: 'processing',\n    label: 'Processing your query',\n    detail: 'Understanding your question'\n  }, {\n    id: 'search',\n    label: 'Searching complaint database',\n    detail: 'Looking up relevant data'\n  }, {\n    id: 'analyze',\n    label: 'Analyzing trends and patterns',\n    detail: 'Generating insights'\n  }, {\n    id: 'respond',\n    label: 'Preparing response',\n    detail: 'Formatting answer for you'\n  }];\n  const all = hasImage ? imageSteps : chatSteps;\n  return all.map((s, i) => ({\n    ...s,\n    active: i <= phase,\n    status: i < phase ? 'done' : i === phase ? 'running' : 'analyzing'\n  }));\n}\nconst SUGGESTIONS = ['üöß Report a pothole', 'üíß Water pipe leaking', 'üóëÔ∏è Garbage not collected', 'üí° Streetlight not working', 'üåä Waterlogging issue'];\nexport default function ReportPage() {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [image, setImage] = useState(null);\n  const [preview, setPreview] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [phase, setPhase] = useState(-1);\n  const [started, setStarted] = useState(false);\n  const [hasImage, setHasImage] = useState(false);\n  const bottomRef = useRef(null);\n  const fileRef = useRef(null);\n  const timerRef = useRef(null);\n  useEffect(() => {\n    var _bottomRef$current;\n    (_bottomRef$current = bottomRef.current) === null || _bottomRef$current === void 0 ? void 0 : _bottomRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages, phase]);\n\n  // Handle paste event to capture images from clipboard\n  useEffect(() => {\n    const handlePaste = e => {\n      var _e$clipboardData;\n      const items = (_e$clipboardData = e.clipboardData) === null || _e$clipboardData === void 0 ? void 0 : _e$clipboardData.items;\n      if (!items) return;\n      for (const item of items) {\n        if (item.type.startsWith('image/')) {\n          e.preventDefault();\n          const file = item.getAsFile();\n          if (file) {\n            setImage(file);\n            setPreview(URL.createObjectURL(file));\n          }\n          break;\n        }\n      }\n    };\n    document.addEventListener('paste', handlePaste);\n    return () => document.removeEventListener('paste', handlePaste);\n  }, []);\n\n  // Simulate step-by-step agent progress\n  const simulateSteps = useCallback((onDone, isImageSubmission) => {\n    let step = 0;\n    const maxSteps = isImageSubmission ? 7 : 4;\n    setPhase(0);\n    timerRef.current = setInterval(() => {\n      step++;\n      if (step >= maxSteps) {\n        clearInterval(timerRef.current);\n        setPhase(maxSteps + 1); // all done\n        onDone();\n      } else {\n        setPhase(step);\n      }\n    }, 1400);\n  }, []);\n  const handleImage = e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    setImage(file);\n    setPreview(URL.createObjectURL(file));\n  };\n  const handleRemoveImage = () => {\n    setImage(null);\n    setPreview(null);\n    if (fileRef.current) fileRef.current.value = '';\n  };\n  const handleSubmit = async text => {\n    const msg = text || input.trim();\n    if (!msg && !image) return;\n    const isImageSubmission = !!image;\n    setHasImage(isImageSubmission);\n    setStarted(true);\n    setLoading(true);\n    setPhase(0);\n\n    // Add user message\n    setMessages(prev => [...prev, {\n      role: 'user',\n      text: msg,\n      image: preview\n    }]);\n    setInput('');\n    setPreview(null);\n\n    // Add thinking message\n    const thinkingId = Date.now();\n    setMessages(prev => [...prev, {\n      role: 'thinking',\n      id: thinkingId\n    }]);\n    try {\n      const apiPromise = image ? submitWithImage(msg) : submitChatOnly(msg);\n      simulateSteps(async () => {\n        try {\n          const result = await apiPromise;\n          setMessages(prev => prev.map(m => m.id === thinkingId ? {\n            role: 'assistant',\n            text: result\n          } : m));\n        } catch (err) {\n          var _err$response, _err$response$data, _err$response2, _err$response2$data;\n          const errorMessage = (err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.reply) || (err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || '‚ùå Something went wrong. Please try again.';\n          setMessages(prev => prev.map(m => m.id === thinkingId ? {\n            role: 'assistant',\n            text: errorMessage\n          } : m));\n        } finally {\n          setLoading(false);\n          setPhase(-1);\n          setImage(null);\n          setHasImage(false);\n        }\n      }, isImageSubmission);\n    } catch (err) {\n      setMessages(prev => prev.map(m => m.id === thinkingId ? {\n        role: 'assistant',\n        text: '‚ùå Something went wrong. Please try again.'\n      } : m));\n      setLoading(false);\n      setPhase(-1);\n      setImage(null);\n    }\n  };\n  const submitWithImage = async location => {\n    const fd = new FormData();\n    fd.append('image', image);\n    fd.append('location', location || 'Chennai');\n    const {\n      data\n    } = await axios.post(`${BASE}/complaint`, fd, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    return data.message || 'Complaint submitted successfully!';\n  };\n  const submitChatOnly = async msg => {\n    const {\n      data\n    } = await axios.post(`${BASE}/chat`, {\n      message: msg,\n      session_id: 'public_portal_chat'\n    });\n    return data.reply || data.message || 'Received your message.';\n  };\n\n  // Welcome screen\n  if (!started) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-2xl mx-auto px-4 py-16 flex flex-col\\r items-center text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-16 h-16 rounded-2xl bg-gradient-to-br\\r from-blue-600 to-purple-600 flex items-center\\r justify-center text-3xl mb-6 shadow-lg\",\n      children: \"\\uD83C\\uDFD9\\uFE0F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold text-white mb-2\",\n      children: \"Report a Civic Issue\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-zinc-400 mb-10 max-w-md\",\n      children: \"Take a photo, share your location \\u2014 CiviqAI will analyze it and notify the right department automatically.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-xl\",\n      children: /*#__PURE__*/_jsxDEV(InputBar, {\n        input: input,\n        setInput: setInput,\n        image: image,\n        preview: preview,\n        fileRef: fileRef,\n        handleImage: handleImage,\n        onSubmit: handleSubmit,\n        loading: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap gap-2 justify-center mt-6\",\n      children: SUGGESTIONS.map(s => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleSubmit(s),\n        className: \"px-4 py-2 bg-zinc-900 border border-white/10\\r rounded-full text-sm text-zinc-400\\r hover:border-white/30 hover:text-white\\r transition-all\",\n        children: s\n      }, s, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 213,\n    columnNumber: 5\n  }, this);\n\n  // Chat view\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-2xl mx-auto px-4 flex flex-col\\r h-[calc(100vh-65px)]\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-y-auto py-6 space-y-8\",\n      children: [messages.map((m, i) => {\n        var _m$text, _m$text2;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [m.role === 'user' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-6\",\n            children: [m.image && /*#__PURE__*/_jsxDEV(\"img\", {\n              src: m.image,\n              alt: \"uploaded\",\n              className: \"w-full max-h-56 object-cover\\r rounded-2xl mb-3 border border-white/10\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl font-bold text-white leading-tight\",\n              children: m.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 15\n          }, this), m.role === 'thinking' && phase >= 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-zinc-900 border border-white/10\\r rounded-2xl p-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-4 h-4 border-2 border-zinc-600\\r border-t-blue-400 rounded-full animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm font-medium text-zinc-400\",\n                children: hasImage ? 'CiviqAI is processing your complaint...' : 'CiviqAI is thinking...'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(ThinkingSteps, {\n              steps: buildSteps(phase, hasImage)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 15\n          }, this), m.role === 'assistant' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-6 h-6 rounded-full bg-gradient-to-br\\r from-blue-500 to-purple-600 flex items-center\\r justify-center text-xs\",\n                children: \"\\uD83E\\uDD16\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm font-semibold text-white\",\n                children: \"CiviqAI\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"prose prose-invert text-zinc-200\\r text-base leading-relaxed max-w-none\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: m.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 17\n            }, this), (_m$text = m.text) !== null && _m$text !== void 0 && _m$text.includes('submitted') || (_m$text2 = m.text) !== null && _m$text2 !== void 0 && _m$text2.includes('sent') ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-green-500/10 border border-green-500/20\\r rounded-xl p-4 flex items-start gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-2xl\",\n                children: \"\\u2705\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-green-400 font-semibold text-sm\",\n                  children: \"Complaint Submitted\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-green-300/70 text-xs mt-0.5\",\n                  children: \"Your complaint is now live on the feed and the department has been notified.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 19\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 15\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: bottomRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pb-4 pt-2 border-t border-white/10\",\n      children: /*#__PURE__*/_jsxDEV(InputBar, {\n        input: input,\n        setInput: setInput,\n        image: image,\n        preview: preview,\n        fileRef: fileRef,\n        handleImage: handleImage,\n        handleRemoveImage: handleRemoveImage,\n        onSubmit: handleSubmit,\n        loading: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 262,\n    columnNumber: 5\n  }, this);\n}\n\n// ‚îÄ‚îÄ Shared Input Bar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n_s(ReportPage, \"WxP7oCwH/0pzSBHtgJFCBgocdYU=\");\n_c = ReportPage;\nfunction InputBar({\n  input,\n  setInput,\n  image,\n  preview,\n  fileRef,\n  handleImage,\n  handleRemoveImage,\n  onSubmit,\n  loading\n}) {\n  const handleKey = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      onSubmit(input);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-zinc-900 border border-white/10 rounded-2xl\\r overflow-hidden focus-within:border-white/30\\r transition-colors\",\n    children: [preview && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-4 pt-3\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative inline-block\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: preview,\n          alt: \"preview\",\n          className: \"h-20 w-32 object-cover rounded-xl\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleRemoveImage,\n          className: \"absolute -top-1 -right-1 w-5 h-5 bg-zinc-700\\r rounded-full flex items-center justify-center\\r text-xs hover:bg-red-600 transition-colors\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-end gap-2 px-4 py-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: input,\n        onChange: e => setInput(e.target.value),\n        onKeyDown: handleKey,\n        placeholder: preview ? \"Add location or description...\" : \"Describe the issue or paste an image (Ctrl+V)...\",\n        rows: 1,\n        className: \"flex-1 bg-transparent text-white text-sm\\r placeholder:text-zinc-600 resize-none focus:outline-none\\r max-h-32 overflow-y-auto\",\n        style: {\n          fieldSizing: 'content'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2 flex-shrink-0\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => fileRef.current.click(),\n          className: \"w-8 h-8 rounded-full flex items-center justify-center\\r text-zinc-500 hover:text-white hover:bg-white/10\\r transition-colors\",\n          title: \"Attach photo (or paste with Ctrl+V)\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-5 h-5\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 1.5,\n              d: \"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: fileRef,\n          type: \"file\",\n          accept: \"image/*\",\n          className: \"hidden\",\n          onChange: handleImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onSubmit(input),\n          disabled: loading || !input.trim() && !image,\n          className: \"w-8 h-8 rounded-full bg-white flex items-center\\r justify-center disabled:opacity-30 disabled:cursor-not-allowed\\r hover:bg-zinc-200 transition-colors\",\n          children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-4 h-4 border-2 border-zinc-400\\r border-t-zinc-800 rounded-full animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-4 h-4 text-black\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M5 12h14M12 5l7 7-7 7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 367,\n    columnNumber: 5\n  }, this);\n}\n_c2 = InputBar;\nvar _c, _c2;\n$RefreshReg$(_c, \"ReportPage\");\n$RefreshReg$(_c2, \"InputBar\");","map":{"version":3,"names":["useState","useRef","useEffect","useCallback","axios","ThinkingSteps","jsxDEV","_jsxDEV","BASE","process","env","REACT_APP_API_URL","buildSteps","phase","hasImage","imageSteps","id","label","detail","chatSteps","all","map","s","i","active","status","SUGGESTIONS","ReportPage","_s","messages","setMessages","input","setInput","image","setImage","preview","setPreview","loading","setLoading","setPhase","started","setStarted","setHasImage","bottomRef","fileRef","timerRef","_bottomRef$current","current","scrollIntoView","behavior","handlePaste","e","_e$clipboardData","items","clipboardData","item","type","startsWith","preventDefault","file","getAsFile","URL","createObjectURL","document","addEventListener","removeEventListener","simulateSteps","onDone","isImageSubmission","step","maxSteps","setInterval","clearInterval","handleImage","target","files","handleRemoveImage","value","handleSubmit","text","msg","trim","prev","role","thinkingId","Date","now","apiPromise","submitWithImage","submitChatOnly","result","m","err","_err$response","_err$response$data","_err$response2","_err$response2$data","errorMessage","response","data","reply","message","location","fd","FormData","append","post","headers","session_id","className","children","fileName","_jsxFileName","lineNumber","columnNumber","InputBar","onSubmit","onClick","_m$text","_m$text2","src","alt","steps","includes","ref","_c","handleKey","key","shiftKey","onChange","onKeyDown","placeholder","rows","style","fieldSizing","click","title","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","accept","disabled","_c2","$RefreshReg$"],"sources":["C:/Users/NISHANTH MEGAN/civiqai/frontend/public-portal/src/pages/ReportPage.jsx"],"sourcesContent":["import { useState, useRef, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport ThinkingSteps from '../components/ThinkingSteps';\r\n\r\nconst BASE = process.env.REACT_APP_API_URL || 'http://localhost:8080';\r\n\r\n// Simulates the agent pipeline steps in real time\r\nfunction buildSteps(phase, hasImage) {\r\n  const imageSteps = [\r\n    { id: 'analyze',  label: 'Analyzing image with Gemini Vision',\r\n      detail: 'Identifying issue type, severity and road condition' },\r\n    { id: 'locate',   label: 'Geocoding location',\r\n      detail: 'Converting address to coordinates via Maps API' },\r\n    { id: 'ward',     label: 'Finding municipal ward',\r\n      detail: 'Reverse geocoding to get ward and zone' },\r\n    { id: 'search',   label: 'Searching municipal directory',\r\n      detail: 'Looking up responsible officer in Redis' },\r\n    { id: 'cluster',  label: 'Checking nearby complaints',\r\n      detail: 'Scanning 500m radius for similar issues' },\r\n    { id: 'dispatch', label: 'Sending work order email',\r\n      detail: 'Dispatching to municipal department' },\r\n    { id: 'publish',  label: 'Publishing to public feed',\r\n      detail: 'Posting complaint on the portal' },\r\n  ];\r\n\r\n  const chatSteps = [\r\n    { id: 'processing', label: 'Processing your query',\r\n      detail: 'Understanding your question' },\r\n    { id: 'search',   label: 'Searching complaint database',\r\n      detail: 'Looking up relevant data' },\r\n    { id: 'analyze',  label: 'Analyzing trends and patterns',\r\n      detail: 'Generating insights' },\r\n    { id: 'respond',  label: 'Preparing response',\r\n      detail: 'Formatting answer for you' },\r\n  ];\r\n\r\n  const all = hasImage ? imageSteps : chatSteps;\r\n\r\n  return all.map((s, i) => ({\r\n    ...s,\r\n    active: i <= phase,\r\n    status: i < phase  ? 'done'\r\n          : i === phase ? 'running'\r\n          : 'analyzing'\r\n  }));\r\n}\r\n\r\nconst SUGGESTIONS = [\r\n  'üöß Report a pothole',\r\n  'üíß Water pipe leaking',\r\n  'üóëÔ∏è Garbage not collected',\r\n  'üí° Streetlight not working',\r\n  'üåä Waterlogging issue',\r\n];\r\n\r\nexport default function ReportPage() {\r\n  const [messages, setMessages] = useState([]);\r\n  const [input,    setInput]    = useState('');\r\n  const [image,    setImage]    = useState(null);\r\n  const [preview,  setPreview]  = useState(null);\r\n  const [loading,  setLoading]  = useState(false);\r\n  const [phase,    setPhase]    = useState(-1);\r\n  const [started,  setStarted]  = useState(false);\r\n  const [hasImage, setHasImage] = useState(false);\r\n  const bottomRef  = useRef(null);\r\n  const fileRef    = useRef(null);\r\n  const timerRef   = useRef(null);\r\n\r\n  useEffect(() => {\r\n    bottomRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages, phase]);\r\n\r\n  // Handle paste event to capture images from clipboard\r\n  useEffect(() => {\r\n    const handlePaste = (e) => {\r\n      const items = e.clipboardData?.items;\r\n      if (!items) return;\r\n\r\n      for (const item of items) {\r\n        if (item.type.startsWith('image/')) {\r\n          e.preventDefault();\r\n          const file = item.getAsFile();\r\n          if (file) {\r\n            setImage(file);\r\n            setPreview(URL.createObjectURL(file));\r\n          }\r\n          break;\r\n        }\r\n      }\r\n    };\r\n\r\n    document.addEventListener('paste', handlePaste);\r\n    return () => document.removeEventListener('paste', handlePaste);\r\n  }, []);\r\n\r\n  // Simulate step-by-step agent progress\r\n  const simulateSteps = useCallback((onDone, isImageSubmission) => {\r\n    let step = 0;\r\n    const maxSteps = isImageSubmission ? 7 : 4;\r\n    setPhase(0);\r\n    timerRef.current = setInterval(() => {\r\n      step++;\r\n      if (step >= maxSteps) {\r\n        clearInterval(timerRef.current);\r\n        setPhase(maxSteps + 1); // all done\r\n        onDone();\r\n      } else {\r\n        setPhase(step);\r\n      }\r\n    }, 1400);\r\n  }, []);\r\n\r\n  const handleImage = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    setImage(file);\r\n    setPreview(URL.createObjectURL(file));\r\n  };\r\n\r\n  const handleRemoveImage = () => {\r\n    setImage(null);\r\n    setPreview(null);\r\n    if (fileRef.current) fileRef.current.value = '';\r\n  };\r\n\r\n  const handleSubmit = async (text) => {\r\n    const msg = text || input.trim();\r\n    if (!msg && !image) return;\r\n\r\n    const isImageSubmission = !!image;\r\n    setHasImage(isImageSubmission);\r\n    setStarted(true);\r\n    setLoading(true);\r\n    setPhase(0);\r\n\r\n    // Add user message\r\n    setMessages(prev => [...prev, {\r\n      role:    'user',\r\n      text:    msg,\r\n      image:   preview\r\n    }]);\r\n    setInput('');\r\n    setPreview(null);\r\n\r\n    // Add thinking message\r\n    const thinkingId = Date.now();\r\n    setMessages(prev => [...prev, {\r\n      role: 'thinking',\r\n      id:   thinkingId\r\n    }]);\r\n\r\n    try {\r\n      const apiPromise = image\r\n        ? submitWithImage(msg)\r\n        : submitChatOnly(msg);\r\n\r\n      simulateSteps(async () => {\r\n        try {\r\n          const result = await apiPromise;\r\n          setMessages(prev => prev.map(m =>\r\n            m.id === thinkingId\r\n              ? { role: 'assistant', text: result }\r\n              : m\r\n          ));\r\n        } catch (err) {\r\n          const errorMessage = err?.response?.data?.reply\r\n            || err?.response?.data?.message\r\n            || '‚ùå Something went wrong. Please try again.';\r\n          setMessages(prev => prev.map(m =>\r\n            m.id === thinkingId\r\n              ? { role: 'assistant', text: errorMessage }\r\n              : m\r\n          ));\r\n        } finally {\r\n          setLoading(false);\r\n          setPhase(-1);\r\n          setImage(null);\r\n          setHasImage(false);\r\n        }\r\n      }, isImageSubmission);\r\n    } catch (err) {\r\n      setMessages(prev => prev.map(m =>\r\n        m.id === thinkingId\r\n          ? { role: 'assistant', text: '‚ùå Something went wrong. Please try again.' }\r\n          : m\r\n      ));\r\n      setLoading(false);\r\n      setPhase(-1);\r\n      setImage(null);\r\n    }\r\n  };\r\n\r\n  const submitWithImage = async (location) => {\r\n    const fd = new FormData();\r\n    fd.append('image',    image);\r\n    fd.append('location', location || 'Chennai');\r\n    const { data } = await axios.post(`${BASE}/complaint`, fd, {\r\n      headers: { 'Content-Type': 'multipart/form-data' }\r\n    });\r\n    return data.message || 'Complaint submitted successfully!';\r\n  };\r\n\r\n  const submitChatOnly = async (msg) => {\r\n    const { data } = await axios.post(`${BASE}/chat`, {\r\n      message: msg,\r\n      session_id: 'public_portal_chat'\r\n    });\r\n    return data.reply || data.message || 'Received your message.';\r\n  };\r\n\r\n  // Welcome screen\r\n  if (!started) return (\r\n    <div className=\"max-w-2xl mx-auto px-4 py-16 flex flex-col\r\n                    items-center text-center\">\r\n      <div className=\"w-16 h-16 rounded-2xl bg-gradient-to-br\r\n                      from-blue-600 to-purple-600 flex items-center\r\n                      justify-center text-3xl mb-6 shadow-lg\">\r\n        üèôÔ∏è\r\n      </div>\r\n      <h1 className=\"text-3xl font-bold text-white mb-2\">\r\n        Report a Civic Issue\r\n      </h1>\r\n      <p className=\"text-zinc-400 mb-10 max-w-md\">\r\n        Take a photo, share your location ‚Äî CiviqAI will analyze it\r\n        and notify the right department automatically.\r\n      </p>\r\n\r\n      {/* Main input */}\r\n      <div className=\"w-full max-w-xl\">\r\n        <InputBar\r\n          input={input}\r\n          setInput={setInput}\r\n          image={image}\r\n          preview={preview}\r\n          fileRef={fileRef}\r\n          handleImage={handleImage}\r\n          onSubmit={handleSubmit}\r\n          loading={loading}\r\n        />\r\n      </div>\r\n\r\n      {/* Suggestions */}\r\n      <div className=\"flex flex-wrap gap-2 justify-center mt-6\">\r\n        {SUGGESTIONS.map(s => (\r\n          <button\r\n            key={s}\r\n            onClick={() => handleSubmit(s)}\r\n            className=\"px-4 py-2 bg-zinc-900 border border-white/10\r\n                       rounded-full text-sm text-zinc-400\r\n                       hover:border-white/30 hover:text-white\r\n                       transition-all\"\r\n          >\r\n            {s}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // Chat view\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto px-4 flex flex-col\r\n                    h-[calc(100vh-65px)]\">\r\n\r\n      {/* Messages */}\r\n      <div className=\"flex-1 overflow-y-auto py-6 space-y-8\">\r\n        {messages.map((m, i) => (\r\n          <div key={i}>\r\n\r\n            {/* User message */}\r\n            {m.role === 'user' && (\r\n              <div className=\"mb-6\">\r\n                {m.image && (\r\n                  <img src={m.image} alt=\"uploaded\"\r\n                       className=\"w-full max-h-56 object-cover\r\n                                  rounded-2xl mb-3 border border-white/10\"/>\r\n                )}\r\n                <h2 className=\"text-2xl font-bold text-white leading-tight\">\r\n                  {m.text}\r\n                </h2>\r\n              </div>\r\n            )}\r\n\r\n            {/* Thinking / Processing */}\r\n            {m.role === 'thinking' && phase >= 0 && (\r\n              <div className=\"bg-zinc-900 border border-white/10\r\n                              rounded-2xl p-5\">\r\n                <div className=\"flex items-center gap-2 mb-4\">\r\n                  <div className=\"w-4 h-4 border-2 border-zinc-600\r\n                                  border-t-blue-400 rounded-full animate-spin\"/>\r\n                  <span className=\"text-sm font-medium text-zinc-400\">\r\n                    {hasImage ? 'CiviqAI is processing your complaint...' : 'CiviqAI is thinking...'}\r\n                  </span>\r\n                </div>\r\n                <ThinkingSteps steps={buildSteps(phase, hasImage)} />\r\n              </div>\r\n            )}\r\n\r\n            {/* Assistant response */}\r\n            {m.role === 'assistant' && (\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <div className=\"w-6 h-6 rounded-full bg-gradient-to-br\r\n                                  from-blue-500 to-purple-600 flex items-center\r\n                                  justify-center text-xs\">ü§ñ</div>\r\n                  <span className=\"text-sm font-semibold text-white\">CiviqAI</span>\r\n                </div>\r\n                <div className=\"prose prose-invert text-zinc-200\r\n                                text-base leading-relaxed max-w-none\">\r\n                  <p>{m.text}</p>\r\n                </div>\r\n\r\n                {/* Success card */}\r\n                {m.text?.includes('submitted') ||\r\n                 m.text?.includes('sent') ? (\r\n                  <div className=\"bg-green-500/10 border border-green-500/20\r\n                                  rounded-xl p-4 flex items-start gap-3\">\r\n                    <span className=\"text-2xl\">‚úÖ</span>\r\n                    <div>\r\n                      <p className=\"text-green-400 font-semibold text-sm\">\r\n                        Complaint Submitted\r\n                      </p>\r\n                      <p className=\"text-green-300/70 text-xs mt-0.5\">\r\n                        Your complaint is now live on the feed and the\r\n                        department has been notified.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n        <div ref={bottomRef} />\r\n      </div>\r\n\r\n      {/* Sticky input */}\r\n      <div className=\"pb-4 pt-2 border-t border-white/10\">\r\n        <InputBar\r\n          input={input}\r\n          setInput={setInput}\r\n          image={image}\r\n          preview={preview}\r\n          fileRef={fileRef}\r\n          handleImage={handleImage}\r\n          handleRemoveImage={handleRemoveImage}\r\n          onSubmit={handleSubmit}\r\n          loading={loading}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// ‚îÄ‚îÄ Shared Input Bar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\r\nfunction InputBar({ input, setInput, image, preview, fileRef,\r\n                    handleImage, handleRemoveImage, onSubmit, loading }) {\r\n\r\n  const handleKey = (e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      onSubmit(input);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-zinc-900 border border-white/10 rounded-2xl\r\n                    overflow-hidden focus-within:border-white/30\r\n                    transition-colors\">\r\n\r\n      {/* Image preview strip */}\r\n      {preview && (\r\n        <div className=\"px-4 pt-3\">\r\n          <div className=\"relative inline-block\">\r\n            <img src={preview} alt=\"preview\"\r\n                 className=\"h-20 w-32 object-cover rounded-xl\"/>\r\n            <button\r\n              onClick={handleRemoveImage}\r\n              className=\"absolute -top-1 -right-1 w-5 h-5 bg-zinc-700\r\n                         rounded-full flex items-center justify-center\r\n                         text-xs hover:bg-red-600 transition-colors\">\r\n              ‚úï\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Text input */}\r\n      <div className=\"flex items-end gap-2 px-4 py-3\">\r\n        <textarea\r\n          value={input}\r\n          onChange={e => setInput(e.target.value)}\r\n          onKeyDown={handleKey}\r\n          placeholder={preview ? \"Add location or description...\" : \"Describe the issue or paste an image (Ctrl+V)...\"}\r\n          rows={1}\r\n          className=\"flex-1 bg-transparent text-white text-sm\r\n                     placeholder:text-zinc-600 resize-none focus:outline-none\r\n                     max-h-32 overflow-y-auto\"\r\n          style={{ fieldSizing: 'content' }}\r\n        />\r\n\r\n        {/* Action buttons */}\r\n        <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n\r\n          {/* Attach photo */}\r\n          <button\r\n            onClick={() => fileRef.current.click()}\r\n            className=\"w-8 h-8 rounded-full flex items-center justify-center\r\n                       text-zinc-500 hover:text-white hover:bg-white/10\r\n                       transition-colors\"\r\n            title=\"Attach photo (or paste with Ctrl+V)\"\r\n          >\r\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\"\r\n                 viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\"\r\n                    strokeWidth={1.5}\r\n                    d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\"/>\r\n            </svg>\r\n          </button>\r\n          <input ref={fileRef} type=\"file\" accept=\"image/*\"\r\n                 className=\"hidden\" onChange={handleImage} />\r\n\r\n          {/* Submit */}\r\n          <button\r\n            onClick={() => onSubmit(input)}\r\n            disabled={loading || (!input.trim() && !image)}\r\n            className=\"w-8 h-8 rounded-full bg-white flex items-center\r\n                       justify-center disabled:opacity-30 disabled:cursor-not-allowed\r\n                       hover:bg-zinc-200 transition-colors\"\r\n          >\r\n            {loading\r\n              ? <div className=\"w-4 h-4 border-2 border-zinc-400\r\n                                border-t-zinc-800 rounded-full animate-spin\"/>\r\n              : <svg className=\"w-4 h-4 text-black\" fill=\"none\"\r\n                     stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\"\r\n                        strokeWidth={2} d=\"M5 12h14M12 5l7 7-7 7\"/>\r\n                </svg>\r\n            }\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}