{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\NISHANTH MEGAN\\\\civiqai\\\\frontend\\\\public-portal\\\\src\\\\pages\\\\FeedPage.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useCallback } from 'react';\nimport ComplaintPost from '../components/ComplaintPost';\nimport { useComplaints } from '../hooks/useComplaints';\nimport { useSSE } from '../hooks/useSSE';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FILTERS = ['All', 'Open', 'In Progress', 'Resolved'];\nconst TYPES = ['All', 'Pothole', 'Water Leak', 'Garbage', 'Streetlight', 'Power Outage', 'Waterlogging'];\nexport default function FeedPage() {\n  _s();\n  const {\n    complaints,\n    loading,\n    addComplaint,\n    updateComplaint\n  } = useComplaints();\n  const [activeFilter, setActiveFilter] = useState('All');\n  const handleSSE = useCallback(event => {\n    if (event.type === 'new_pin') addComplaint({\n      id: event.complaint_id,\n      issue_type: event.issue_type,\n      lat: event.lat,\n      lng: event.lng,\n      status: 'open',\n      priority: event.priority || 'P3',\n      location: event.location || '',\n      submitted_at: event.timestamp\n    });\n    if (event.type === 'pin_update') updateComplaint(event.complaint_id, {\n      status: event.status\n    });\n  }, [addComplaint, updateComplaint]);\n  useSSE(handleSSE);\n  const filtered = complaints.filter(c => {\n    if (activeFilter === 'All') return true;\n    if (activeFilter === 'Open') return c.status === 'open';\n    if (activeFilter === 'In Progress') return c.status === 'in_progress';\n    if (activeFilter === 'Resolved') return c.status === 'resolved';\n    return true;\n  });\n  const counts = {\n    open: complaints.filter(c => c.status === 'open').length,\n    resolved: complaints.filter(c => c.status === 'resolved').length,\n    p1: complaints.filter(c => c.priority === 'P1').length\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-2xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-4 px-4 py-3 border-b border-white/10\\r text-xs text-zinc-500\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"flex items-center gap-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"w-1.5 h-1.5 rounded-full bg-red-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), counts.open, \" open\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"flex items-center gap-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"w-1.5 h-1.5 rounded-full bg-green-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), counts.resolved, \" resolved\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), counts.p1 > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"flex items-center gap-1 text-red-400 font-semibold\",\n        children: [\"\\u26A0\\uFE0F \", counts.p1, \" P1 alerts\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"ml-auto flex items-center gap-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"w-1.5 h-1.5 rounded-full bg-green-400 animate-pulse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), \"Live\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-1 px-4 py-2 border-b border-white/10\\r overflow-x-auto scrollbar-none\",\n      children: FILTERS.map(f => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setActiveFilter(f),\n        className: `px-3 py-1 rounded-full text-xs font-medium\n                        whitespace-nowrap transition-all\n                        ${activeFilter === f ? 'bg-white text-black' : 'text-zinc-500 hover:text-white hover:bg-white/10'}`,\n        children: f\n      }, f, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-center py-20 text-zinc-600\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-6 h-6 border-2 border-zinc-600 border-t-white\\r rounded-full animate-spin mb-3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this), \"Loading complaints...\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this) : filtered.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-20 text-zinc-600\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-4xl mb-3\",\n        children: \"\\uD83C\\uDFD9\\uFE0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No complaints yet. Be the first to report!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this) : filtered.map(c => /*#__PURE__*/_jsxDEV(ComplaintPost, {\n      complaint: c\n    }, c.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s(FeedPage, \"rfw/+6luGuIcOcGgcd0rMGKOx0k=\", false, function () {\n  return [useComplaints, useSSE];\n});\n_c = FeedPage;\nvar _c;\n$RefreshReg$(_c, \"FeedPage\");","map":{"version":3,"names":["useState","useCallback","ComplaintPost","useComplaints","useSSE","jsxDEV","_jsxDEV","FILTERS","TYPES","FeedPage","_s","complaints","loading","addComplaint","updateComplaint","activeFilter","setActiveFilter","handleSSE","event","type","id","complaint_id","issue_type","lat","lng","status","priority","location","submitted_at","timestamp","filtered","filter","c","counts","open","length","resolved","p1","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","f","onClick","complaint","_c","$RefreshReg$"],"sources":["C:/Users/NISHANTH MEGAN/civiqai/frontend/public-portal/src/pages/FeedPage.jsx"],"sourcesContent":["import { useState, useCallback } from 'react';\r\nimport ComplaintPost  from '../components/ComplaintPost';\r\nimport { useComplaints } from '../hooks/useComplaints';\r\nimport { useSSE }        from '../hooks/useSSE';\r\n\r\nconst FILTERS = ['All', 'Open', 'In Progress', 'Resolved'];\r\nconst TYPES   = ['All', 'Pothole', 'Water Leak', 'Garbage',\r\n                 'Streetlight', 'Power Outage', 'Waterlogging'];\r\n\r\nexport default function FeedPage() {\r\n  const { complaints, loading, addComplaint,\r\n          updateComplaint } = useComplaints();\r\n  const [activeFilter, setActiveFilter] = useState('All');\r\n\r\n  const handleSSE = useCallback((event) => {\r\n    if (event.type === 'new_pin') addComplaint({\r\n      id:          event.complaint_id,\r\n      issue_type:  event.issue_type,\r\n      lat:         event.lat,\r\n      lng:         event.lng,\r\n      status:      'open',\r\n      priority:    event.priority || 'P3',\r\n      location:    event.location || '',\r\n      submitted_at:event.timestamp\r\n    });\r\n    if (event.type === 'pin_update')\r\n      updateComplaint(event.complaint_id, { status: event.status });\r\n  }, [addComplaint, updateComplaint]);\r\n\r\n  useSSE(handleSSE);\r\n\r\n  const filtered = complaints.filter(c => {\r\n    if (activeFilter === 'All')         return true;\r\n    if (activeFilter === 'Open')        return c.status === 'open';\r\n    if (activeFilter === 'In Progress') return c.status === 'in_progress';\r\n    if (activeFilter === 'Resolved')    return c.status === 'resolved';\r\n    return true;\r\n  });\r\n\r\n  const counts = {\r\n    open:     complaints.filter(c => c.status === 'open').length,\r\n    resolved: complaints.filter(c => c.status === 'resolved').length,\r\n    p1:       complaints.filter(c => c.priority === 'P1').length,\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto\">\r\n\r\n      {/* Stats strip */}\r\n      <div className=\"flex gap-4 px-4 py-3 border-b border-white/10\r\n                      text-xs text-zinc-500\">\r\n        <span className=\"flex items-center gap-1\">\r\n          <span className=\"w-1.5 h-1.5 rounded-full bg-red-500\"/>\r\n          {counts.open} open\r\n        </span>\r\n        <span className=\"flex items-center gap-1\">\r\n          <span className=\"w-1.5 h-1.5 rounded-full bg-green-500\"/>\r\n          {counts.resolved} resolved\r\n        </span>\r\n        {counts.p1 > 0 && (\r\n          <span className=\"flex items-center gap-1 text-red-400 font-semibold\">\r\n            ‚ö†Ô∏è {counts.p1} P1 alerts\r\n          </span>\r\n        )}\r\n        <span className=\"ml-auto flex items-center gap-1\">\r\n          <span className=\"w-1.5 h-1.5 rounded-full bg-green-400 animate-pulse\"/>\r\n          Live\r\n        </span>\r\n      </div>\r\n\r\n      {/* Filter tabs */}\r\n      <div className=\"flex gap-1 px-4 py-2 border-b border-white/10\r\n                      overflow-x-auto scrollbar-none\">\r\n        {FILTERS.map(f => (\r\n          <button\r\n            key={f}\r\n            onClick={() => setActiveFilter(f)}\r\n            className={`px-3 py-1 rounded-full text-xs font-medium\r\n                        whitespace-nowrap transition-all\r\n                        ${activeFilter === f\r\n                          ? 'bg-white text-black'\r\n                          : 'text-zinc-500 hover:text-white hover:bg-white/10'}`}\r\n          >\r\n            {f}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Feed */}\r\n      {loading ? (\r\n        <div className=\"flex flex-col items-center py-20 text-zinc-600\">\r\n          <div className=\"w-6 h-6 border-2 border-zinc-600 border-t-white\r\n                          rounded-full animate-spin mb-3\"/>\r\n          Loading complaints...\r\n        </div>\r\n      ) : filtered.length === 0 ? (\r\n        <div className=\"text-center py-20 text-zinc-600\">\r\n          <p className=\"text-4xl mb-3\">üèôÔ∏è</p>\r\n          <p>No complaints yet. Be the first to report!</p>\r\n        </div>\r\n      ) : (\r\n        filtered.map(c => (\r\n          <ComplaintPost key={c.id} complaint={c} />\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AAC7C,OAAOC,aAAa,MAAO,6BAA6B;AACxD,SAASC,aAAa,QAAQ,wBAAwB;AACtD,SAASC,MAAM,QAAe,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhD,MAAMC,OAAO,GAAG,CAAC,KAAK,EAAE,MAAM,EAAE,aAAa,EAAE,UAAU,CAAC;AAC1D,MAAMC,KAAK,GAAK,CAAC,KAAK,EAAE,SAAS,EAAE,YAAY,EAAE,SAAS,EACzC,aAAa,EAAE,cAAc,EAAE,cAAc,CAAC;AAE/D,eAAe,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EACjC,MAAM;IAAEC,UAAU;IAAEC,OAAO;IAAEC,YAAY;IACjCC;EAAgB,CAAC,GAAGX,aAAa,CAAC,CAAC;EAC3C,MAAM,CAACY,YAAY,EAAEC,eAAe,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EAEvD,MAAMiB,SAAS,GAAGhB,WAAW,CAAEiB,KAAK,IAAK;IACvC,IAAIA,KAAK,CAACC,IAAI,KAAK,SAAS,EAAEN,YAAY,CAAC;MACzCO,EAAE,EAAWF,KAAK,CAACG,YAAY;MAC/BC,UAAU,EAAGJ,KAAK,CAACI,UAAU;MAC7BC,GAAG,EAAUL,KAAK,CAACK,GAAG;MACtBC,GAAG,EAAUN,KAAK,CAACM,GAAG;MACtBC,MAAM,EAAO,MAAM;MACnBC,QAAQ,EAAKR,KAAK,CAACQ,QAAQ,IAAI,IAAI;MACnCC,QAAQ,EAAKT,KAAK,CAACS,QAAQ,IAAI,EAAE;MACjCC,YAAY,EAACV,KAAK,CAACW;IACrB,CAAC,CAAC;IACF,IAAIX,KAAK,CAACC,IAAI,KAAK,YAAY,EAC7BL,eAAe,CAACI,KAAK,CAACG,YAAY,EAAE;MAAEI,MAAM,EAAEP,KAAK,CAACO;IAAO,CAAC,CAAC;EACjE,CAAC,EAAE,CAACZ,YAAY,EAAEC,eAAe,CAAC,CAAC;EAEnCV,MAAM,CAACa,SAAS,CAAC;EAEjB,MAAMa,QAAQ,GAAGnB,UAAU,CAACoB,MAAM,CAACC,CAAC,IAAI;IACtC,IAAIjB,YAAY,KAAK,KAAK,EAAU,OAAO,IAAI;IAC/C,IAAIA,YAAY,KAAK,MAAM,EAAS,OAAOiB,CAAC,CAACP,MAAM,KAAK,MAAM;IAC9D,IAAIV,YAAY,KAAK,aAAa,EAAE,OAAOiB,CAAC,CAACP,MAAM,KAAK,aAAa;IACrE,IAAIV,YAAY,KAAK,UAAU,EAAK,OAAOiB,CAAC,CAACP,MAAM,KAAK,UAAU;IAClE,OAAO,IAAI;EACb,CAAC,CAAC;EAEF,MAAMQ,MAAM,GAAG;IACbC,IAAI,EAAMvB,UAAU,CAACoB,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACP,MAAM,KAAK,MAAM,CAAC,CAACU,MAAM;IAC5DC,QAAQ,EAAEzB,UAAU,CAACoB,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACP,MAAM,KAAK,UAAU,CAAC,CAACU,MAAM;IAChEE,EAAE,EAAQ1B,UAAU,CAACoB,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACN,QAAQ,KAAK,IAAI,CAAC,CAACS;EACxD,CAAC;EAED,oBACE7B,OAAA;IAAKgC,SAAS,EAAC,mBAAmB;IAAAC,QAAA,gBAGhCjC,OAAA;MAAKgC,SAAS,EAAC,uEACuB;MAAAC,QAAA,gBACpCjC,OAAA;QAAMgC,SAAS,EAAC,yBAAyB;QAAAC,QAAA,gBACvCjC,OAAA;UAAMgC,SAAS,EAAC;QAAqC;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAC,CAAC,EACtDV,MAAM,CAACC,IAAI,EAAC,OACf;MAAA;QAAAM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eACPrC,OAAA;QAAMgC,SAAS,EAAC,yBAAyB;QAAAC,QAAA,gBACvCjC,OAAA;UAAMgC,SAAS,EAAC;QAAuC;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAC,CAAC,EACxDV,MAAM,CAACG,QAAQ,EAAC,WACnB;MAAA;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,EACNV,MAAM,CAACI,EAAE,GAAG,CAAC,iBACZ/B,OAAA;QAAMgC,SAAS,EAAC,oDAAoD;QAAAC,QAAA,GAAC,eAChE,EAACN,MAAM,CAACI,EAAE,EAAC,YAChB;MAAA;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CACP,eACDrC,OAAA;QAAMgC,SAAS,EAAC,iCAAiC;QAAAC,QAAA,gBAC/CjC,OAAA;UAAMgC,SAAS,EAAC;QAAqD;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAC,CAAC,QAEzE;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC,eAGNrC,OAAA;MAAKgC,SAAS,EAAC,gFACgC;MAAAC,QAAA,EAC5ChC,OAAO,CAACqC,GAAG,CAACC,CAAC,iBACZvC,OAAA;QAEEwC,OAAO,EAAEA,CAAA,KAAM9B,eAAe,CAAC6B,CAAC,CAAE;QAClCP,SAAS,EAAE;AACvB;AACA,0BAA0BvB,YAAY,KAAK8B,CAAC,GAChB,qBAAqB,GACrB,kDAAkD,EAAG;QAAAN,QAAA,EAEpEM;MAAC,GARGA,CAAC;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OASA,CACT;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,EAGL/B,OAAO,gBACNN,OAAA;MAAKgC,SAAS,EAAC,gDAAgD;MAAAC,QAAA,gBAC7DjC,OAAA;QAAKgC,SAAS,EAAC;MACgC;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC,yBAEnD;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,GACJb,QAAQ,CAACK,MAAM,KAAK,CAAC,gBACvB7B,OAAA;MAAKgC,SAAS,EAAC,iCAAiC;MAAAC,QAAA,gBAC9CjC,OAAA;QAAGgC,SAAS,EAAC,eAAe;QAAAC,QAAA,EAAC;MAAG;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eACpCrC,OAAA;QAAAiC,QAAA,EAAG;MAA0C;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC9C,CAAC,GAENb,QAAQ,CAACc,GAAG,CAACZ,CAAC,iBACZ1B,OAAA,CAACJ,aAAa;MAAY6C,SAAS,EAAEf;IAAE,GAAnBA,CAAC,CAACZ,EAAE;MAAAoB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAiB,CAC1C,CACF;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAACjC,EAAA,CAlGuBD,QAAQ;EAAA,QAEFN,aAAa,EAkBzCC,MAAM;AAAA;AAAA4C,EAAA,GApBgBvC,QAAQ;AAAA,IAAAuC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}